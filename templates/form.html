<!DOCTYPE html>
<html>
<head>
    <title>Create Quotation — JAGADHA</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<style>
    body { background: #fff6fb; }
    .card { border: 0; border-radius: 12px; }
    .item-row { display:flex; gap:10px; margin-bottom:8px; }
    .item-row input { flex:1; }
    .remove-btn { width:40px; }

    /* UPDATED — underline added */
    .section-title {
        color:#C2185B;
        font-weight:600;
        text-decoration: underline;
    }

    .pink-btn { background:#E91E63; border:0; color:white; }
    .summary-input { max-width: 300px; margin-top:6px; }

    .pink-btn {
        background:#E91E63;
        border:0;
        color:white;
        transition: 0.3s ease;   /* smooth animation */
    }

    .pink-btn:hover {
        background:#C2185B;      /* darker pink on hover */
        color:white;             /* keep text white */
    }

</style>
</head>
<body>

<div class="container mt-5" style="max-width: 900px;">
    <div class="card shadow p-4">
        <h3 class="text-center mb-3">Quotation Generator</h3>

        <form action="/generate_pdf" method="POST">

            <!-- Customer Info -->
            <div class="row">
                <div class="col-md-6 mb-3">
                    <label class="form-label">Customer Name</label>
                    <input type="text" name="customer" class="form-control" required>
                </div>
                <div class="col-md-6 mb-3">
                    <label class="form-label">Event Date</label>
                    <input type="date" name="event_date" class="form-control" required>
                </div>
            </div>

            <div class="mb-3">
                <label class="form-label">Mandabam Name</label>
                <input type="text" name="mandabam" class="form-control" required>
            </div>

            <!-- STAGE DECORATION -->
            <div class="mt-4">
                <div class="d-flex justify-content-between align-items-center">
                    <h5 class="section-title">STAGE DECORATION</h5>
                    <button type="button" class="btn btn-sm pink-btn" onclick="addRow('stage-section','stage')">+ Add Item</button>
                </div>
                <div id="stage-section" class="mt-3"></div>

                <label class="form-label mt-2">TOTAL</label>
                <input type="number" name="stage_total" id="stage_total" class="form-control summary-input total-field" placeholder="Enter stage total" oninput="updateAllTotal()">
            </div>

            <hr>

            <!-- STALL ITEMS -->
            <div class="mt-4">
                <div class="d-flex justify-content-between align-items-center">
                    <h5 class="section-title">STALL ITEMS</h5>
                    <button type="button" class="btn btn-sm pink-btn" onclick="addRow('stall-section','stall')">+ Add Item</button>
                </div>
                <div id="stall-section" class="mt-3"></div>

                <label class="form-label mt-2">TOTAL</label>
                <input type="number" name="stall_total" id="stall_total" class="form-control summary-input total-field" placeholder="Enter stall total" oninput="updateAllTotal()">
            </div>

            <hr>

            <!-- OTHER ITEMS -->
            <div class="mt-4">
                <div class="d-flex justify-content-between align-items-center">
                    <h5 class="section-title">OTHER ITEMS</h5>
                    <button type="button" class="btn btn-sm pink-btn" onclick="addRow('other-section','other')">+ Add Item</button>
                </div>
                <div id="other-section" class="mt-3"></div>

                <label class="form-label mt-2">TOTAL</label>
                <input type="number" name="other_total" id="other_total" class="form-control summary-input" placeholder="Enter total" oninput="updateAllTotal()">
            </div>

            <!-- AMOUNT SUMMARY -->
            <div class="mt-4">
                <h5 class="section-title">AMOUNT SUMMARY</h5>

                <label class="form-label mt-2">ALL TOTAL</label>
                <input type="number" name="stall_all_total" class="form-control summary-input" id="all_total" readonly>

                <label class="form-label mt-2">ADVANCE</label>
                <input type="number" name="stall_advance" class="form-control summary-input">

                <label class="form-label mt-2">BALANCE</label>
                <input type="number" name="stall_final_balance" class="form-control summary-input">
            </div>

            <hr>

            <div class="d-grid">
                <button class="btn pink-btn btn-lg">Generate PDF</button>
            </div>

        </form>
    </div>
</div>

<script>
function addRow(sectionId, prefix) {
    let div = document.getElementById(sectionId);

    let row = document.createElement("div");
    row.className = "item-row";

    row.innerHTML = `
        <input type="text" name="${prefix}_item[]" class="form-control" placeholder="Name of Item">
        <input type="text" name="${prefix}_price[]" class="form-control" placeholder="Quantity / Details">
        <button type="button" class="btn btn-danger remove-btn" onclick="this.parentNode.remove()">X</button>
    `;

    div.appendChild(row);
}

// Auto-sum Stage + Stall + Other TOTALs into ALL TOTAL
function updateAllTotal() {
    let stage = parseFloat(document.getElementById('stage_total').value) || 00;
    let stall = parseFloat(document.getElementById('stall_total').value) || 00;
    let other = parseFloat(document.getElementById('other_total').value) || 00;

    let all = stage + stall + other;
    document.getElementById('all_total').value = all.toFixed(2);
}
</script>

</body>
</html>
